; Yakuza 6 VWF Patch
;
; Yakuza 6 has the VWF table inside the exe.
; The table has 256 positions, so it is enough to contain the width of all the ISO-8859-1 characters in yakuza.dds
; The table is accesed using the character value.
; The problem is that the game uses UTF-8 encoding for the strings, so the equivalence are:
; [00 - 7F] => Standard ASCII values. (Are equal in UTF-8 and ISO-8859-1)
; [C280 - C2BF] => ISO-8859-1 values between 80 and BF
; [C380 - C3BF] => ISO-8859-1 values between C0 and FF
;
; This patch adds 2 small functions that gets the index for the ISO-8859-1 character, so the exe can use the VWF table.
;
>yakuza6.exe
0000000000C91CEE:81->E8 ; Check (cmp esi, 0x100) replaced with function call
0000000000C91CEF:FE->9C
0000000000C91CF0:00->F7
0000000000C91CF1:01->F3
0000000000C91CF3:00->90
0000000000C91CF4:73->90
0000000000C91CF5:16->90
0000000000C91D12:3D->E8 ; Check (cmp eax, 0x100) replaced with function callE8
0000000000C91D13:00->B7
0000000000C91D14:01->F7
0000000000C91D15:00->F3
0000000000C91D17:73->90
0000000000C91D18:15->90
0000000000C96A9B:81->E8 ; Check (cmp esi, 0x100) replaced with function call
0000000000C96A9C:FE->EF
0000000000C96A9D:00->A9
0000000000C96A9E:01->F3
0000000000C96AA0:00->90
0000000000C96AA1:73->90
0000000000C96AA2:16->90
0000000000C96ABF:3D->E8 ; Check (cmp eax, 0x100) replaced with function call
0000000000C96AC0:00->0A
0000000000C96AC1:01->AA
0000000000C96AC2:00->F3
0000000000C96AC4:73->90
0000000000C96AC5:15->90
0000000001BD148F:00->81 ; Start of the first function (ESI)
0000000001BD1490:00->FE
0000000001BD1491:00->80
0000000001BD1495:00->73
0000000001BD1496:00->01
0000000001BD1497:00->C3
0000000001BD1498:00->81
0000000001BD1499:00->FE
0000000001BD149A:00->80
0000000001BD149B:00->C2
0000000001BD149E:00->73
0000000001BD149F:00->06
0000000001BD14A0:00->BE
0000000001BD14A5:00->C3
0000000001BD14A6:00->81
0000000001BD14A7:00->FE
0000000001BD14A8:00->C0
0000000001BD14A9:00->C2
0000000001BD14AC:00->73
0000000001BD14AD:00->07
0000000001BD14AE:00->81
0000000001BD14AF:00->EE
0000000001BD14B1:00->C2
0000000001BD14B4:00->C3
0000000001BD14B5:00->81
0000000001BD14B6:00->FE
0000000001BD14B7:00->80
0000000001BD14B8:00->C3
0000000001BD14BB:00->73
0000000001BD14BC:00->02
0000000001BD14BD:00->EB
0000000001BD14BE:00->E1
0000000001BD14BF:00->81
0000000001BD14C0:00->FE
0000000001BD14C1:00->C0
0000000001BD14C2:00->C3
0000000001BD14C5:00->73
0000000001BD14C6:00->D9
0000000001BD14C7:00->81
0000000001BD14C8:00->EE
0000000001BD14C9:00->C0
0000000001BD14CA:00->C2
0000000001BD14CD:00->C3
0000000001BD14CE:00->3D ; Start of the second function (EAX)
0000000001BD14CF:00->80
0000000001BD14D3:00->73
0000000001BD14D4:00->01
0000000001BD14D5:00->C3
0000000001BD14D6:00->3D
0000000001BD14D7:00->80
0000000001BD14D8:00->C2
0000000001BD14DB:00->73
0000000001BD14DC:00->06
0000000001BD14DD:00->B8
0000000001BD14E2:00->C3
0000000001BD14E3:00->3D
0000000001BD14E4:00->C0
0000000001BD14E5:00->C2
0000000001BD14E8:00->73
0000000001BD14E9:00->06
0000000001BD14EA:00->2D
0000000001BD14EC:00->C2
0000000001BD14EF:00->C3
0000000001BD14F0:00->3D
0000000001BD14F1:00->80
0000000001BD14F2:00->C3
0000000001BD14F5:00->73
0000000001BD14F6:00->02
0000000001BD14F7:00->EB
0000000001BD14F8:00->E4
0000000001BD14F9:00->3D
0000000001BD14FA:00->C0
0000000001BD14FB:00->C3
0000000001BD14FE:00->73
0000000001BD14FF:00->DD
0000000001BD1500:00->2D
0000000001BD1501:00->C0
0000000001BD1502:00->C2
0000000001BD1505:00->C3
